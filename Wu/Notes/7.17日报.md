# 7.17日报

今天学了跨域。但是在实践时遇到了点问题，但还不知道是什么原因。

## 跨域

### 基本概念

由于浏览器的同源策略，当前页面向其他页面发送请求时，URL的域名必须和当前页面完全一致。

完全一致是指：协议，域名，端口都要一样。

否则会报错。但是还是有几种方法可以跨域获取资源。

#### CORS（跨域资源共享）

CORS是一个W3C标准，全称是"跨域资源共享"（Cross-origin resource sharing）。

它允许浏览器向跨源服务器，发出`XMLHttpRequest`请求，从而克服了AJAX只能[同源](http://www.ruanyifeng.com/blog/2016/04/same-origin-policy.html)使用的限制。（好像现在还有fetch，但还不是很了解）

整个CORS通信过程，都是浏览器自动完成，不需要用户参与。对于开发者来说，CORS通信与同源的AJAX通信没有差别，代码完全一样。浏览器一旦发现AJAX请求跨源，就会自动添加一些附加的头信息，有时还会多出一次附加的请求，但用户不会有感觉。 

能够使用CORS跨域的关键在于，接受请求的网站的头信息的`Access-Control-Allow-Origin `的值包含发送请求的当前页面的域名，或者为`*`（意味着接受所有页面的跨域请求）。否则不能通过CORS跨域。

#### 通过Jsonp跨域

注意：jsonp除了前端处理外，还需要服务器端的配合。jsonp只支持get请求，不支持post请求。jsonp不容易判断请求结果，一般结合定时。 

#### 使用降域实现跨域

#### postMessage实现跨域





